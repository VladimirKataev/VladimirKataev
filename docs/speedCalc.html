<html>
<header>

<script>

function setAnswer(){
  mpg = document.getElementById("efficiency").value;
  gallon = document.getElementById("gallonCost").value;
  work = document.getElementById("timeCost").value;
  cc = document.getElementById("v0").value;

  v = work / gallon;
  v *= (cc * cc) * mpg / 2;
  v = Math.cbrt(v);
  v = Math.round(v*100) / 100;
  document.getElementById("answer").innerHTML = v + " MPH";

}

</script>

  <title>Optimal Speed</title>
  <link rel="stylesheet" href="styles.css">
</header>
<body>



<h1 style="text-align:center;"><a href="index.html">Vladimir Kataev's website</a></h1>


<div class="article">

Imagine you're doing a long journey on a straight highway.
You want to calculate the optimal speed to drive at.
An optimal speed accounting for how much your time is worth, but also fuel costs.
So, assuming your hour costs however much, and you know your MPG at a specific speed, here is the proof for the optimal speed.

<br><br><img align:auto style="border-radius:50px;" src="images/fuelOptimSpeed.png"><br><br>

The reasoning behind the fuel consumption being quadratic, is that drag is quadratic.
However actual fuel costs are hard to calculate.
It is easy however, to create a quick equation where doubling velocity quadruples fuel being consumed. <br><br>

To use this calculator practically: drive between 2 fuel stations with cruise control on at a consistent speed.
Knowing the distance and fuel consumption between them, you can determine MPG for the speed you cruise controlled at.<br><br>

Couple major points:<br>
<ul align="left">
  <li>This is assuming you're travelling at one constant speed</li>
  <li>on a flat road (though this doesn't matter too much because gravity is a conservative force)</li>
  <li>Without refuelling</li>
  <li>You're driving a gasoline car (this works for electric cars too, but DO NOT USE MPGe, use miles/KWH and cost of KWH)</li>
</ul>
<div width=70% style="background-color:#ADA;border-radius:50px;">
  <form>
    <label for="gallonCost">Gallon Cost: </label>
    <input type="number" id="gallonCost" name="gallonCost" value="5.9"> <br>
    <label for="timeCost">Time Cost per hour: </label>
    <input type="number" id="timeCost" name="timeCost" value="15.25"><br>
    <label for="efficiency">Known MPG: </label>
    <input type="number" id="efficiency" name="efficiency" value="25.4"><br>
    <label for="v0">Speed of known MPG: </label>
    <input type="number" id="v0" name="v0" value="70"><br>
  </form>
  <button onclick="setAnswer()"> CALCULATE </button>

  <div id="answer"> >answer will appear here< </div>
</div>


</div>

</body>


<!-- Just putting my LaTeX here so I won't forget:

C_{miles}(v, d) = C_{time} + C_{fuel}
\\
C_{miles}(v, d) = C_{hour}t(v, d) + C_{fuel}(v, d)
\\
C_{mile} = C_{hour}\frac{d}{v} + C_{gallon}d\frac{gallons_{0}}{mile_{0}}(\frac{v}{v_{0}})^2
\\ at\ d = 1\ mile, t = 1\ hour
\\
\displaystyle C_{mile} = \frac{C_{hour}}{V} + C_{gallon}\frac{gallons_{0}}{mile_{0}}(\frac{V}{V_{0}})^2
\\formatted\ for\ next\ step\ ease:
\\
\displaystyle C_{mile} = C_{hour} V^{-1} + C_{gallon}\frac{gallons_{0}}{mile_{0}\ V_{0}^{2}}V^{2}
\\Taking\ a\ derivative\ with \ respect\ to V
\\
\frac{d}{dv} C_{mile} = -C_{hour}V^{-2} + C_{gallon}\frac{2\ gallons_{0}}{mile_{0}\ V_{0}^{2}}V
\\Optimising\ for\ the\ derivative\ to\ be\ 0
\\
\frac{d}{dv} C_{mile} = -C_{hour}V^{-2} + C_{gallon}\frac{2\ gallons_{0}}{mile_{0}\ V_{0}^{2}}V = 0
\\
C_{gallon}\frac{2\ gallons_{0}}{mile_{0}\ v_{0}^{2}}V = C_{hour}V^{-2}
\\
V^{3} = \frac{C_{hour}}{C_{gallon}}\frac{mile_{0}\ v_{0}^{2}}{2\ gallons_{0}}
\\
V = \sqrt[3]{\frac{C_{hour}}{C_{gallon}}\frac{mile_{0}\ V_{0}^{2}}{2\ gallons_{0}}}



-->
</html>
